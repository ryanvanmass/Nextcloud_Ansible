---
### Install Dependancies ###
  - name: Install Depandancies
    hosts: localhost
    tasks:
      - name: LAMP Stack
        zypper:
          name:
            - apache2
            - php7
            - php7-mysql
            - apache2-mod_php7


### Configuring LAMP Stack ###
  - name: Configure LAMP Stack
    hosts: localhost
    tasks:
      - name: enable php7 apache mod
        shell: a2enmod php7
      - name: Add php mod to apache file
        shell: echo "AddType application/x-httpd-php .php" >> /etc/apache2/mime-defaults.conf
      - name: enable apache2 service
        systemd:
          name: apache2
          state: restarted
          enabled: yes
      - name: Enable MariaDB Service
        systemd:
          name: mysql
          state: restarted
          enabled: yes




### Configure MariaDB ###
  - name: Configure Nextcloud Database
    hosts: localhost
    tasks:
      - name: Create Database
        shell: mysql -u root -e "create database nextcloud"
      - name: Create Nextcloud User
        shell: mysql -u root -e "create user nextclouduser@localhost identified by 'some-password-here'"
      - name: Set Security permissions for Nextcloud user
        shell: mysql -u root -e "create user nextclouduser@localhost identified by 'some-password-here'"

### Install Nextcloud ###







### Configure Firewall ###








### Configure Fail2Ban ###








### Configure Backup Service ###